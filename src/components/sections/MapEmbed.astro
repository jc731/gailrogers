---
import Section from '../Section.astro';
import { PADDING_X_ONLY } from '../../utils/spacing';

interface Props {
  embedUrl: string;
  height?: string;
  className?: string;
}

const { embedUrl, height = '450', className = '' } = Astro.props;
---

<Section className={`${PADDING_X_ONLY} ${className}`.trim()} containerClassName="container mx-auto max-w-6xl">
  <div class="map-embed-wrapper w-full">
    <iframe
      src={embedUrl}
      width="100%"
      height={height}
      style="border:0;"
      allowfullscreen
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade"
      title="Office location map"
      class="map-iframe rounded-lg"
    />
  </div>
</Section>

<style>
  .map-embed-wrapper {
    width: 100%;
    overflow: hidden;
  }

  .map-iframe {
    width: 100%;
    display: block;
    max-width: 100%;
  }

  /* Ensure iframe is responsive on mobile */
  @media (max-width: 640px) {
    .map-embed-wrapper {
      position: relative;
      padding-bottom: 75%; /* 4:3 aspect ratio for mobile */
      height: 0;
    }
    
    .map-iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  }
</style>
