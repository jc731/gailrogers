---
import { Icon } from 'astro-icon/components';
import Section from '../Section.astro';
import { PADDING_STANDARD } from '../../utils/spacing';

interface Props {
  items: Array<{
    icon: string;
    text: string;
    link?: string;
  }>;
  backgroundColor?: string;
  className?: string;
}

const { items, backgroundColor = 'slate-dark', className = '' } = Astro.props;

// Map common background colors to Tailwind classes
const bgColorMap: Record<string, string> = {
  'slate-dark': 'bg-slate-dark',
  'slate-darker': 'bg-slate-darker',
  'gray-800': 'bg-gray-800',
  'gray-900': 'bg-gray-900',
  'brand-primary': 'bg-brand-primary',
  'brand-primaryDark': 'bg-brand-primaryDark',
};

const bgColorClass = backgroundColor.startsWith('#') 
  ? '' 
  : bgColorMap[backgroundColor] || 'bg-slate-dark';
const bgColorStyle = backgroundColor.startsWith('#') 
  ? `background-color: ${backgroundColor};` 
  : '';
---

<Section 
  className={`${PADDING_STANDARD} ${bgColorClass} ${className}`.trim()}
  containerClassName="container mx-auto max-w-6xl"
  style={bgColorStyle}
>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
    {items.map((item) => {
      // Ensure icon name has mdi: prefix if not already present
      const iconName = item.icon.startsWith('mdi:') ? item.icon : `mdi:${item.icon}`;
      
      const content = (
        <div class="flex flex-col items-center text-center text-white">
          <div class="mb-4">
            <Icon 
              name={iconName}
              class="w-16 h-16 text-white"
              aria-hidden="true"
            />
          </div>
          <h3 class="text-xl font-semibold">{item.text}</h3>
        </div>
      );

      return item.link ? (
        <a 
          href={item.link}
          class="block hover:opacity-80 focus-ring-dark min-h-[44px] transition-opacity"
          aria-label={`${item.text} - Learn more`}
        >
          {content}
        </a>
      ) : (
        <div>
          {content}
        </div>
      );
    })}
  </div>
</Section>

