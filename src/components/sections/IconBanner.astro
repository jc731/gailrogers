---
interface Props {
  items: Array<{
    icon: string;
    text: string;
    link?: string;
  }>;
  backgroundColor?: string;
  className?: string;
}

const { items, backgroundColor = 'gray-800', className = '' } = Astro.props;

// Map common background colors to Tailwind classes
const bgColorMap: Record<string, string> = {
  'gray-800': 'bg-gray-800',
  'gray-900': 'bg-gray-900',
  'brand-primary': 'bg-brand-primary',
  'brand-primaryDark': 'bg-brand-primaryDark',
};

const bgColorClass = backgroundColor.startsWith('#') 
  ? '' 
  : bgColorMap[backgroundColor] || 'bg-gray-800';
const bgColorStyle = backgroundColor.startsWith('#') 
  ? `background-color: ${backgroundColor};` 
  : '';

// Icon mappings - using Material Design Icons via CDN
const iconMap: Record<string, string> = {
  'account-group': 'M12 5.5A3.5 3.5 0 0 1 15.5 2A3.5 3.5 0 0 1 19 5.5A3.5 3.5 0 0 1 15.5 9A3.5 3.5 0 0 1 12 5.5M5 8C5.56 8 6.08 8.15 6.53 8.42C6.38 9.85 6.8 11.27 7.66 12.38C7.16 13.34 6.16 14 5 14A3 3 0 0 1 2 11A3 3 0 0 1 5 8M19 8A3 3 0 0 1 22 11A3 3 0 0 1 19 14C17.84 14 16.84 13.34 16.34 12.38C17.2 11.27 17.62 9.85 17.47 8.42C17.92 8.15 18.44 8 19 8M5.5 18.25C5.5 16.18 8.41 14.5 12 14.5C15.59 14.5 18.5 16.18 18.5 18.25V20H5.5V18.25M0 20V18.5C0 17.11 1.89 15.94 4.45 15.6C3.86 16.28 3.5 17.22 3.5 18.25V20H0M24 20H20.5V18.25C20.5 17.22 20.14 16.28 19.55 15.6C22.11 15.94 24 17.11 24 18.5V20Z',
  'account-heart': 'M15 14C16.33 14 19 14.67 19 16V17H11V16C11 14.67 13.67 14 15 14M15 13C16.11 13 17 12.11 17 11S16.11 9 15 9C13.89 9 13 9.89 13 11S13.89 13 15 13M19 8H5V18H19V8M5 6C3.89 6 3 6.89 3 8V18A2 2 0 0 0 5 20H19A2 2 0 0 0 21 18V8C21 6.89 20.1 6 19 6H5M12 2.58L13.5 4.08L12 5.58L10.5 4.08L12 2.58Z',
  'home': 'M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z',
};
---

<section 
  class={`py-12 px-4 md:px-6 lg:px-8 ${bgColorClass} ${className}`}
  style={bgColorStyle}
>
  <div class="container mx-auto max-w-6xl">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {items.map((item) => {
        const content = (
          <div class="flex flex-col items-center text-center text-white">
            <div class="mb-4">
              <svg 
                class="w-16 h-16 text-white"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
              >
                <path d={iconMap[item.icon] || iconMap['home']} />
              </svg>
            </div>
            <h3 class="text-xl font-semibold">{item.text}</h3>
          </div>
        );

        return item.link ? (
          <a 
            href={item.link}
            class="block hover:opacity-80 focus-ring-dark min-h-[44px] transition-opacity"
            aria-label={`${item.text} - Learn more`}
          >
            {content}
          </a>
        ) : (
          <div>
            {content}
          </div>
        );
      })}
    </div>
  </div>
</section>

