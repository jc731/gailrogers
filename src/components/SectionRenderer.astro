---
import Hero from './sections/Hero.astro';
import RichText from './sections/RichText.astro';
import RichTextWithForm from './sections/RichTextWithForm.astro';
import FAQ from './sections/FAQ.astro';
import CTABand from './sections/CTABand.astro';
import CardGrid from './sections/CardGrid.astro';
import Slider from './sections/Slider.astro';
import LinkButtons from './sections/LinkButtons.astro';
import IconBanner from './sections/IconBanner.astro';
import ContactForm from './forms/ContactForm.astro';
import MapEmbed from './sections/MapEmbed.astro';
import type { z } from 'zod';
import type { sectionSchema } from '../../content/config';

// Infer section type from schema
type Section = z.infer<typeof sectionSchema>;

interface Props {
  section: Section;
}

const { section } = Astro.props;
---

{section.type === 'hero' && (
  <Hero 
    heading={section.heading}
    subheading={section.subheading}
    ctaText={section.ctaText}
    ctaLink={section.ctaLink}
    backgroundImage={section.backgroundImage}
  />
)}

{section.type === 'richText' && (
  <RichText 
    content={section.content}
    className={section.className}
  />
)}

{section.type === 'richTextWithForm' && (
  <RichTextWithForm 
    content={section.content}
    formTitle={section.formTitle}
    formIntroText={section.formIntroText}
    className={section.className}
  />
)}

{section.type === 'faq' && (
  <FAQ 
    title={section.title}
    items={section.items}
  />
)}

{section.type === 'ctaBand' && (
  <CTABand 
    heading={section.heading}
    text={section.text}
    primaryCTA={section.primaryCTA}
    secondaryCTA={section.secondaryCTA}
    className={section.className}
  />
)}

{section.type === 'cardGrid' && (
  <CardGrid 
    title={section.title}
    cards={section.cards}
    columns={section.columns}
  />
)}

{section.type === 'slider' && (
  <Slider 
    slides={section.slides}
    autoplay={section.autoplay}
    autoplayInterval={section.autoplayInterval}
    showIndicators={section.showIndicators}
    showControls={section.showControls}
  />
)}

{section.type === 'linkButtons' && (
  <LinkButtons 
    title={section.title}
    buttons={section.buttons}
    layout={section.layout}
    className={section.className}
  />
)}

{section.type === 'iconBanner' && (
  <IconBanner 
    items={section.items}
    backgroundColor={section.backgroundColor}
    className={section.className}
  />
)}

{section.type === 'contactForm' && (
  <ContactForm 
    title={section.title}
    introText={section.introText}
    className={section.className}
  />
)}

{section.type === 'mapEmbed' && (
  <MapEmbed 
    embedUrl={section.embedUrl}
    height={section.height}
    className={section.className}
  />
)}
